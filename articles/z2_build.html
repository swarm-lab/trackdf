<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="trackdf">
<title>2 - Building a track table • trackdf</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="2 - Building a track table">
<meta property="og:description" content="trackdf">
<meta property="og:image" content="https://swarm-lab.github.io/trackdf/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">trackdf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/z1_install.html">1 - Installing trackdf</a>
    <a class="dropdown-item" href="../articles/z2_build.html">2 - Building a track table</a>
    <a class="dropdown-item" href="../articles/z3_manipulate.html">3 - Manipulating a track table</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/swarm-lab/trackdf/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>2 - Building a track table</h1>
                        <h4 data-toc-skip class="author">Simon
Garnier</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/swarm-lab/trackdf/blob/HEAD/vignettes/z2_build.Rmd" class="external-link"><code>vignettes/z2_build.Rmd</code></a></small>
      <div class="d-none name"><code>z2_build.Rmd</code></div>
    </div>

    
    
<p><code>trackdf</code> can handle multiple types of tracking data (in
particular those generated by GPS units and video-tracking software) and
multiple data frame classes (<code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">base::data.frame</a></code>,
<code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble</a></code>, and <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table</a></code>).
This is a design choice meant to accommodate the data processing
pipelines of a maximum of users. It lets you use your favorite data
manipulation paradigm (base <code>R</code>,
<code>dplyr</code>/<code>tidyverse</code>, or <code>data.table</code>)
while still standardizing the data format across studies and
applications.</p>
<p>A consequence of that versatility, however, is that building a “track
table” (the name we give to the structure that will hold your tracking
data) requires a little bit of extra work from you (but just a little
bit). This vignette covers building a track table from raw data
generated by automated video-tracking software and GPS collars, for
instance.</p>
<div class="section level2">
<h2 id="anatomy-of-a-track-table">2.1 - Anatomy of a track table<a class="anchor" aria-label="anchor" href="#anatomy-of-a-track-table"></a>
</h2>
<p>At its core, a track table is just a wrapper around a data frame
structure, as defined by one of the three main data frame classes in
<code>R</code>: <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">base::data.frame</a></code>,
<code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble</a></code>, and <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table</a></code>.
The choice of which data frame class is used underneath a track table is
entirely your choice and depends on your preference for one or the other
framework. <code>trackdf</code> will remember that choice and do its
best to maintain it throughout your data analysis pipeline.</p>
<p>A track table is a specialized version of a data frame structure
aimed at storing specifically tracking data, that is positions over
time, of one or more individuals. In order to do that,
<code>trackdf</code> imposes a few constraints on the construction of a
track table over a traditional data frame. First, a track table must
have at least the 4 following named columns:</p>
<ul>
<li>
<code>id</code>: which contains the identity of the individual being
tracked as character strings;</li>
<li>
<code>t</code>: which contains the time of each observation as
date-time <code>POSIXct</code> objects;</li>
<li>
<code>x</code> and <code>y</code>: which contains the positions as a
numeric values of the observations along each of the axes of an
Euclidean space (e.g., GPS coordinates or the pixel coordinates
outputted by video-tracking software);</li>
<li>
<code>z</code>: an optional column similar to <code>x</code> and
<code>y</code> that can be used in the case of 3-dimensional
trajectories.</li>
</ul>
<p>You can then add as many other columns as you want to store other
data relevant to your work but these 4 columns (+ the optional
<code>z</code> columns) are required in a track table object.</p>
<p>In addition to these columns, a track table contains two additional
attributes that are necessary for certain functions of the package:</p>
<ul>
<li>
<code>proj</code>: which contains information about coordinate
reference system in which the coordinates are projected. This is mostly
useful for geographic data as captured by GPS units, for instance.
<code>trackdf</code> can use that information to automatically reproject
the data into other coordinate reference systems, for instance for
working with GIS data. For video-tracking data and other tracking
systems that do not output geographic data, this can set to
<code>NA</code>.</li>
<li>
<code>type</code>: which contains information about the class of
data frame stored in the track table object. This is mostly required for
maintaining the data frame class when the track table object is
manipulated using <code>dplyr</code>’s functions. It’s mostly irrelevant
from a user’s point of view.</li>
</ul>
<p>Sounds complicated? Don’t worry, <code>trackdf</code> provides a
function to build track tables with just a little bit of input from you.
See the rest of the vignette below.</p>
</div>
<div class="section level2">
<h2 id="building-a-track-table-from-video-tracking-data">2.2 - Building a track table from video-tracking data<a class="anchor" aria-label="anchor" href="#building-a-track-table-from-video-tracking-data"></a>
</h2>
<p>Most video-tracking software generate outputs with information about
the identity of each tracked individual, their position in some form of
Euclidean space (using pixel coordinates or coordinates relative to the
dimensions of the experimental setup), and the time of each observation
(e.g., the frame number in a video). They can also contain other forms
of information relevant to the work and we will also see here how to
import them into a track table.</p>
<p>First, let’s load some data that was generated using the <a href="(https://github.com/swarm-lab/trackdf)" class="external-link"><code>trackR</code></a>
video-tracking software:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/video/01.csv"</span>, package <span class="op">=</span> <span class="st">"trackdf"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">raw</span>, max <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">raw</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    id         x        y size frame track ignore track_fixed</span></span>
<span><span class="co">## 1   1  629.3839 882.4783 1154     1     1  FALSE           1</span></span>
<span><span class="co">## 2   2 1056.1692 656.5207 1064     1     2  FALSE           2</span></span>
<span><span class="co">## 3   3  508.0092 375.2451 1624     1     3  FALSE           3</span></span>
<span><span class="co">## 4   4 1277.6466 373.7491 1443     1     4  FALSE           4</span></span>
<span><span class="co">## 5   5 1379.2844 343.0853 1431     1     5  FALSE           5</span></span>
<span><span class="co">## 6   6 1137.1378 174.5110 1321     1     6  FALSE           6</span></span>
<span><span class="co">## 7   7  737.1931 115.9394 1419     1     7  FALSE           7</span></span>
<span><span class="co">## 8   8  921.8634 103.3508 1237     1     8  FALSE           8</span></span>
<span><span class="co">## 9   1  629.4024 882.4129 1148     2     1  FALSE           1</span></span>
<span><span class="co">## 10  2 1056.1704 656.4691 1068     2     2  FALSE           2</span></span>
<span><span class="co">##  [ reached 'max' / getOption("max.print") -- omitted 21972 rows ]</span></span></code></pre>
<p>This data frame contains 8 columns. The positions are stored in the
<code>x</code> and <code>y</code> columns as pixel coordinates. Time is
store in the <code>frame</code> column as a frame number of the video
the data was collected from. The identity of each tracked individual is
stored in <code>track_fixed</code> (the <code>track</code> column
contains the identities before manual inspection and correction;
<code>id</code> can be ignored for the purpose of this tutorial).</p>
<p>From this raw data, you can create a track table using the
<code>track</code> function as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://swarm-lab.github.io/trackdf/">trackdf</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'trackdf'</span></span></code></pre>
<pre><code><span><span class="co">## The following object is masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     filter</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/track_.html">track</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">x</span>, y <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">y</span>, t <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">frame</span>, id <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">track_fixed</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## No timezone provided. Defaulting to UTC.</span></span></code></pre>
<pre><code><span><span class="co">## No origin provided. Defaulting to Sys.time().</span></span></code></pre>
<pre><code><span><span class="co">## No period provided. Defaulting to 1 second.</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tt</span>, max <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">tt</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Track table [21982 observations]</span></span>
<span><span class="co">## Number of tracks:  81 </span></span>
<span><span class="co">## Dimensions:  2D </span></span>
<span><span class="co">## Geographic:  FALSE </span></span>
<span><span class="co">## Table class:  data frame ('data.frame')</span></span>
<span><span class="co">##    id                   t         x        y</span></span>
<span><span class="co">## 1   1 2023-01-16 18:53:59  629.3839 882.4783</span></span>
<span><span class="co">## 2   2 2023-01-16 18:53:59 1056.1692 656.5207</span></span>
<span><span class="co">## 3   3 2023-01-16 18:53:59  508.0092 375.2451</span></span>
<span><span class="co">## 4   4 2023-01-16 18:53:59 1277.6466 373.7491</span></span>
<span><span class="co">## 5   5 2023-01-16 18:53:59 1379.2844 343.0853</span></span>
<span><span class="co">## 6   6 2023-01-16 18:53:59 1137.1378 174.5110</span></span>
<span><span class="co">## 7   7 2023-01-16 18:53:59  737.1931 115.9394</span></span>
<span><span class="co">## 8   8 2023-01-16 18:53:59  921.8634 103.3508</span></span>
<span><span class="co">## 9   1 2023-01-16 18:54:00  629.4024 882.4129</span></span>
<span><span class="co">## 10  2 2023-01-16 18:54:00 1056.1704 656.4691</span></span>
<span><span class="co">##  [ reached 'max' / getOption("max.print") -- omitted 21972 rows ]</span></span></code></pre>
<p><code>track</code> outputs a few warnings, all related to the time
component that we provided it. Indeed, we provided it with frame numbers
that <code>track</code> doesn’t know how to convert to date-time
<code>POSIXct</code> objects and, therefore, defaulted to using now has
the start of the experiment, UTC as the time zone, and 1 second as the
time between two consecutive observations. We can, however, help
<code>track</code> by provided the missing information into the
<code>origin</code> (start of the experiment), <code>tz</code> (the time
zone), and <code>period</code> (time between two successive
observations) parameter of the function:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/track_.html">track</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">x</span>, y <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">y</span>, t <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">frame</span>, id <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">track_fixed</span>, </span>
<span>            origin <span class="op">=</span> <span class="st">"2019-03-24 12:55:23"</span>, </span>
<span>            period <span class="op">=</span> <span class="st">"0.04S"</span>, <span class="co"># 1/25 of a second</span></span>
<span>            tz <span class="op">=</span> <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tt</span>, max <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">tt</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Track table [21982 observations]</span></span>
<span><span class="co">## Number of tracks:  81 </span></span>
<span><span class="co">## Dimensions:  2D </span></span>
<span><span class="co">## Geographic:  FALSE </span></span>
<span><span class="co">## Table class:  data frame ('data.frame')</span></span>
<span><span class="co">##    id                   t         x        y</span></span>
<span><span class="co">## 1   1 2019-03-24 12:55:23  629.3839 882.4783</span></span>
<span><span class="co">## 2   2 2019-03-24 12:55:23 1056.1692 656.5207</span></span>
<span><span class="co">## 3   3 2019-03-24 12:55:23  508.0092 375.2451</span></span>
<span><span class="co">## 4   4 2019-03-24 12:55:23 1277.6466 373.7491</span></span>
<span><span class="co">## 5   5 2019-03-24 12:55:23 1379.2844 343.0853</span></span>
<span><span class="co">## 6   6 2019-03-24 12:55:23 1137.1378 174.5110</span></span>
<span><span class="co">## 7   7 2019-03-24 12:55:23  737.1931 115.9394</span></span>
<span><span class="co">## 8   8 2019-03-24 12:55:23  921.8634 103.3508</span></span>
<span><span class="co">## 9   1 2019-03-24 12:55:23  629.4024 882.4129</span></span>
<span><span class="co">## 10  2 2019-03-24 12:55:23 1056.1704 656.4691</span></span>
<span><span class="co">##  [ reached 'max' / getOption("max.print") -- omitted 21972 rows ]</span></span></code></pre>
<p>If you would like to include in the track table some of the
additional data contained in your raw data, it is as simple as adding
extra columns when creating data frames. For instance, let’s include the
<code>ignore</code> data from the raw data set:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/track_.html">track</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">x</span>, y <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">y</span>, t <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">frame</span>, id <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">track_fixed</span>, </span>
<span>            ignore <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">ignore</span>,</span>
<span>            origin <span class="op">=</span> <span class="st">"2019-03-24 12:55:23"</span>, </span>
<span>            period <span class="op">=</span> <span class="st">"0.04S"</span>, <span class="co"># 1/25 of a second</span></span>
<span>            tz <span class="op">=</span> <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tt</span>, max <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">tt</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Track table [21982 observations]</span></span>
<span><span class="co">## Number of tracks:  81 </span></span>
<span><span class="co">## Dimensions:  2D </span></span>
<span><span class="co">## Geographic:  FALSE </span></span>
<span><span class="co">## Table class:  data frame ('data.frame')</span></span>
<span><span class="co">##    id                   t         x        y ignore</span></span>
<span><span class="co">## 1   1 2019-03-24 12:55:23  629.3839 882.4783  FALSE</span></span>
<span><span class="co">## 2   2 2019-03-24 12:55:23 1056.1692 656.5207  FALSE</span></span>
<span><span class="co">## 3   3 2019-03-24 12:55:23  508.0092 375.2451  FALSE</span></span>
<span><span class="co">## 4   4 2019-03-24 12:55:23 1277.6466 373.7491  FALSE</span></span>
<span><span class="co">## 5   5 2019-03-24 12:55:23 1379.2844 343.0853  FALSE</span></span>
<span><span class="co">## 6   6 2019-03-24 12:55:23 1137.1378 174.5110  FALSE</span></span>
<span><span class="co">## 7   7 2019-03-24 12:55:23  737.1931 115.9394  FALSE</span></span>
<span><span class="co">## 8   8 2019-03-24 12:55:23  921.8634 103.3508  FALSE</span></span>
<span><span class="co">## 9   1 2019-03-24 12:55:23  629.4024 882.4129  FALSE</span></span>
<span><span class="co">## 10  2 2019-03-24 12:55:23 1056.1704 656.4691  FALSE</span></span>
<span><span class="co">##  [ reached 'max' / getOption("max.print") -- omitted 21972 rows ]</span></span></code></pre>
<p>Finally, <code>track</code> default to using
<code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">base::data.frame</a></code> as its data frame class for storing the
data. If you prefer to work with <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble</a></code> or
<code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table</a></code>, you can specify this in the
<code>track</code> function as follows.</p>
<p>For <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble</a></code>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/track_.html">track</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">x</span>, y <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">y</span>, t <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">frame</span>, id <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">track_fixed</span>, </span>
<span>            ignore <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">ignore</span>,</span>
<span>            origin <span class="op">=</span> <span class="st">"2019-03-24 12:55:23"</span>, </span>
<span>            period <span class="op">=</span> <span class="st">"0.04S"</span>, <span class="co"># 1/25 of a second</span></span>
<span>            tz <span class="op">=</span> <span class="st">"America/New_York"</span>,</span>
<span>            table <span class="op">=</span> <span class="st">"tbl"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tt</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Track table [21982 observations]</span></span>
<span><span class="co">## Number of tracks:  81 </span></span>
<span><span class="co">## Dimensions:  2D </span></span>
<span><span class="co">## Geographic:  FALSE </span></span>
<span><span class="co">## Table class:  tibble ('tbl_df')</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 21,982 × 5</span></span></span>
<span><span class="co">##    id    t                       x     y ignore</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> 1     2019-03-24 <span style="color: #949494;">12:55:23</span>  629.  882. FALSE </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> 2     2019-03-24 <span style="color: #949494;">12:55:23</span> <span style="text-decoration: underline;">1</span>056.  657. FALSE </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> 3     2019-03-24 <span style="color: #949494;">12:55:23</span>  508.  375. FALSE </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> 4     2019-03-24 <span style="color: #949494;">12:55:23</span> <span style="text-decoration: underline;">1</span>278.  374. FALSE </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> 5     2019-03-24 <span style="color: #949494;">12:55:23</span> <span style="text-decoration: underline;">1</span>379.  343. FALSE </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> 6     2019-03-24 <span style="color: #949494;">12:55:23</span> <span style="text-decoration: underline;">1</span>137.  175. FALSE </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> 7     2019-03-24 <span style="color: #949494;">12:55:23</span>  737.  116. FALSE </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> 8     2019-03-24 <span style="color: #949494;">12:55:23</span>  922.  103. FALSE </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> 1     2019-03-24 <span style="color: #949494;">12:55:23</span>  629.  882. FALSE </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> 2     2019-03-24 <span style="color: #949494;">12:55:23</span> <span style="text-decoration: underline;">1</span>056.  656. FALSE </span></span>
<span><span class="co">## <span style="color: #949494;"># … with 21,972 more rows</span></span></span></code></pre>
<p>For <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table</a></code>:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/track_.html">track</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">x</span>, y <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">y</span>, t <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">frame</span>, id <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">track_fixed</span>, </span>
<span>            ignore <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">ignore</span>,</span>
<span>            origin <span class="op">=</span> <span class="st">"2019-03-24 12:55:23"</span>, </span>
<span>            period <span class="op">=</span> <span class="st">"0.04S"</span>, <span class="co"># 1/25 of a second</span></span>
<span>            tz <span class="op">=</span> <span class="st">"America/New_York"</span>,</span>
<span>            table <span class="op">=</span> <span class="st">"dt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tt</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Track table [21982 observations]</span></span>
<span><span class="co">## Number of tracks:  81 </span></span>
<span><span class="co">## Dimensions:  2D </span></span>
<span><span class="co">## Geographic:  FALSE </span></span>
<span><span class="co">## Table class:  data table ('data.table')</span></span>
<span><span class="co">##        id                   t         x        y ignore</span></span>
<span><span class="co">##     1:  1 2019-03-24 12:55:23  629.3839 882.4783  FALSE</span></span>
<span><span class="co">##     2:  2 2019-03-24 12:55:23 1056.1692 656.5207  FALSE</span></span>
<span><span class="co">##     3:  3 2019-03-24 12:55:23  508.0092 375.2451  FALSE</span></span>
<span><span class="co">##     4:  4 2019-03-24 12:55:23 1277.6466 373.7491  FALSE</span></span>
<span><span class="co">##     5:  5 2019-03-24 12:55:23 1379.2844 343.0853  FALSE</span></span>
<span><span class="co">##    ---                                                 </span></span>
<span><span class="co">## 21978: 82 2019-03-24 12:57:15  580.7614 587.2513  FALSE</span></span>
<span><span class="co">## 21979: 34 2019-03-24 12:57:15  493.5477 529.5454  FALSE</span></span>
<span><span class="co">## 21980: 47 2019-03-24 12:57:15  498.8001 432.5990  FALSE</span></span>
<span><span class="co">## 21981: 58 2019-03-24 12:57:15  562.6123 266.9754  FALSE</span></span>
<span><span class="co">## 21982: 67 2019-03-24 12:57:15 1046.3904 146.4723  FALSE</span></span></code></pre>
<hr>
</div>
<div class="section level2">
<h2 id="building-a-track-table-from-gps-data">2.3 - Building a track table from GPS data<a class="anchor" aria-label="anchor" href="#building-a-track-table-from-gps-data"></a>
</h2>
<p>Building a track table from geographic data follows similar
principles, except that <code>track</code> also expect to receive
information about the coordinate reference system the data is using. You
can pass that information to <code>track</code> using the
<code>proj</code> parameter of the function. But first, let’s load some
data that was generated by a GPS collar worn by a goat in Namibia:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/gps/02.csv"</span>, package <span class="op">=</span> <span class="st">"trackdf"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">raw</span>, max <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">raw</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##          date     time      lon       lat</span></span>
<span><span class="co">## 1  2015-09-10 07:00:00 15.76459 -22.37971</span></span>
<span><span class="co">## 2  2015-09-10 07:00:01 15.76459 -22.37971</span></span>
<span><span class="co">## 3  2015-09-10 07:00:02 15.76459 -22.37971</span></span>
<span><span class="co">## 4  2015-09-10 07:00:03 15.76459 -22.37971</span></span>
<span><span class="co">## 5  2015-09-10 07:00:04 15.76459 -22.37971</span></span>
<span><span class="co">## 6  2015-09-10 07:00:05 15.76459 -22.37971</span></span>
<span><span class="co">## 7  2015-09-10 07:00:06 15.76459 -22.37971</span></span>
<span><span class="co">## 8  2015-09-10 07:00:07 15.76459 -22.37971</span></span>
<span><span class="co">## 9  2015-09-10 07:00:08 15.76459 -22.37971</span></span>
<span><span class="co">## 10 2015-09-10 07:00:09 15.76459 -22.37971</span></span>
<span><span class="co">##  [ reached 'max' / getOption("max.print") -- omitted 3590 rows ]</span></span></code></pre>
<p><code>track</code> uses <code><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">sf::st_crs</a></code> to interpret
information about coordinate reference systems. Therefore, you any
format accepted by <code><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">sf::st_crs</a></code> to specify the coordinate
reference system can be used with <code>track</code>. For data generated
using GPS units, the character string “+proj=longlat” is often all
that’s needed.</p>
<p>We can then create our GPS-based track table as follows:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/track_.html">track</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">lon</span>, y <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">lat</span>, t <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">raw</span><span class="op">$</span><span class="va">date</span>, <span class="va">raw</span><span class="op">$</span><span class="va">time</span><span class="op">)</span>, id <span class="op">=</span> <span class="fl">1</span>,  </span>
<span>                proj <span class="op">=</span> <span class="st">"+proj=longlat"</span>, tz <span class="op">=</span> <span class="st">"Africa/Windhoek"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tt</span>, max <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">tt</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Track table [3600 observations]</span></span>
<span><span class="co">## Number of tracks:  1 </span></span>
<span><span class="co">## Dimensions:  2D </span></span>
<span><span class="co">## Geographic:  TRUE </span></span>
<span><span class="co">## Projection:  +proj=longlat </span></span>
<span><span class="co">## Table class:  data frame ('data.frame')</span></span>
<span><span class="co">##    id                   t        x         y</span></span>
<span><span class="co">## 1   1 2015-09-10 07:00:00 15.76459 -22.37971</span></span>
<span><span class="co">## 2   1 2015-09-10 07:00:01 15.76459 -22.37971</span></span>
<span><span class="co">## 3   1 2015-09-10 07:00:02 15.76459 -22.37971</span></span>
<span><span class="co">## 4   1 2015-09-10 07:00:03 15.76459 -22.37971</span></span>
<span><span class="co">## 5   1 2015-09-10 07:00:04 15.76459 -22.37971</span></span>
<span><span class="co">## 6   1 2015-09-10 07:00:05 15.76459 -22.37971</span></span>
<span><span class="co">## 7   1 2015-09-10 07:00:06 15.76459 -22.37971</span></span>
<span><span class="co">## 8   1 2015-09-10 07:00:07 15.76459 -22.37971</span></span>
<span><span class="co">## 9   1 2015-09-10 07:00:08 15.76459 -22.37971</span></span>
<span><span class="co">## 10  1 2015-09-10 07:00:09 15.76459 -22.37971</span></span>
<span><span class="co">##  [ reached 'max' / getOption("max.print") -- omitted 3590 rows ]</span></span></code></pre>
<p>Note that because our raw data already contains dates and times of
the observations, we can simply combine them with <code>paste</code> and
pass the result to <code>track</code> that will interpret them
automatically.</p>
<p>Everything else works similarly to what was shown in the previous
section about video-tracking data. The tutorial about manipulating data
stored in a track table is provided in a separate vignette.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.theswarmlab.com" class="external-link">Simon Garnier</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
